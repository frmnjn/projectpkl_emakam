webpackJsonp([10],{517:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),o=a.n(s),c=a(37),u=a(9),m=a(166),d=a(46),h=(a.n(d),a(167)),g=(a.n(h),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),p=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e){a.setState(n({},e.target.name,e.target.value))},a.handleSubmitCreate=function(e){e.preventDefault(),console.log(a.state.value_user),fetch("http://api.emakam.tujuhlangit.id/api/kecamatan/create_role?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_kecamatan:a.state.value_kecamatan,id_user:a.state.value_user})}).then(a.fetchall).then(a.setState({primary:!a.state.primary}),alert("update sukses")).catch(function(e){a.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})},a.handleSubmitEdit=function(e){fetch("http://api.emakam.tujuhlangit.id/api/kecamatan/update_role/"+a.state.active_id_role+"?token="+sessionStorage.getItem("token"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_kecamatan:a.state.activevalue_kecamatan,id_user:a.state.activevalue_user})}).then(a.fetchall).then(a.setState({large:!a.state.large}),alert("Update sukses")).catch(function(e){a.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})},a.handleChangeOption_kecamatan=function(e){a.setState({value_kecamatan:e.target.value})},a.handleChangeOption_user=function(e){a.setState({value_user:e.target.value})},a.handleChangeOption_active_kecamatan=function(e){a.setState({activevalue_kecamatan:e.target.value})},a.handleChangeOption_active_user=function(e){a.setState({activevalue_user:e.target.value})},a.state={primary:!1,large:!1,modal:!1,isLoaded:!1,table_user:[],table_kecamatan:[],table_constraint_user:[],table_validation:[],id_kecamatan:"",id_user:"",value_kecamatan:"",value_user:"",activevalue_kecamatan:"",activevalue_user:"",activeid_kecamatan:"",activeid_user:"",activenama:"",activeusername:"",active_id_role:""},a.toggle=a.toggle.bind(a),a.toggleLarge=a.toggleLarge.bind(a),a.togglePrimary=a.togglePrimary.bind(a),a.fetchall=a.fetchall.bind(a),a}return i(t,e),g(t,[{key:"componentDidMount",value:function(){this.fetchall()}},{key:"fetchall",value:function(){var e=this;fetch("http://api.emakam.tujuhlangit.id/api/user/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){t=t.filter(function(e){return-1!==e.role.toString().search("4")||-1!==e.role.toString().search("5")}),e.setState({table_user:t})}),fetch("http://api.emakam.tujuhlangit.id/api/kecamatan/viewall?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_kecamatan:t})}),fetch("http://api.emakam.tujuhlangit.id/api/kecamatan/constraint_user?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_constraint_user:t,isLoaded:!0})})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"toggleLarge",value:function(e){this.state.activevalue_kecamatan=e.id_kecamatan,this.state.activevalue_user=e.id_user,this.state.activeid_kecamatan=e.id_kecamatan,this.state.activenama=e.nama,this.state.activeid_user=e.id_user,this.state.activeusername=e.username,this.state.active_id_role=e.id_role,this.setState({large:!this.state.large})}},{key:"togglePrimary",value:function(){this.setState({primary:!this.state.primary})}},{key:"handledelete",value:function(e){var t=this;console.log(e),fetch("http://api.emakam.tujuhlangit.id/api/kecamatan/delete_role/"+e.id_role+"?token="+sessionStorage.getItem("token"),{method:"DELETE"}).then(this.fetchall).then(function(){alert("Hak Akses Berhasil dihapus!")}).catch(function(e){t.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?0==sessionStorage.getItem("login_session")?o.a.createElement("div",{className:"animated fadeIn"},o.a.createElement(u.D,null,o.a.createElement(u.h,{xl:12},o.a.createElement(u.e,null,o.a.createElement(u.g,null,o.a.createElement("row",null,o.a.createElement(u.h,{col:"2"},o.a.createElement("strong",null,"Users Role")),o.a.createElement(u.h,{col:"2",className:"text-right"},o.a.createElement(u.d,{outline:!0,color:"primary",onClick:this.togglePrimary,className:"mr-1"},"Create")))),o.a.createElement(u.f,null,o.a.createElement(u.v,{isOpen:this.state.primary,toggle:this.togglePrimary,className:"modal-primary "+this.props.className},o.a.createElement(u.y,{toggle:this.togglePrimary},"Buat Hak Akses"),o.a.createElement(u.w,null,o.a.createElement("form",{onSubmit:this.handleSubmitCreate},o.a.createElement("div",{class:"form-group"},o.a.createElement("label",null,"ID Kecamatan"),o.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_kecamatan},o.a.createElement("option",{disabled:!0,selected:!0},"ID Kecamatan"),this.state.table_kecamatan.map(function(e,t){return o.a.createElement("option",{value:e.id_kecamatan},e.id_kecamatan," - ",e.nama)}))),o.a.createElement("div",{class:"form-group"},o.a.createElement("label",null,"ID User"),o.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_user},o.a.createElement("option",{disabled:!0,selected:!0},"ID User"),this.state.table_user.map(function(e,t){return o.a.createElement("option",{value:e.id_user},e.id_user," - ",e.username)}))),o.a.createElement("div",{class:"form-group"},o.a.createElement("input",{type:"submit",className:"form-control btn btn-primary",Value:"Submit"})))),o.a.createElement(u.x,null)),o.a.createElement(u.v,{isOpen:this.state.large,toggle:this.toggleLarge,className:"modal-Large "+this.props.className},o.a.createElement(u.y,{toggle:this.toggleLarge},"Edit User"),o.a.createElement(u.w,null,o.a.createElement("form",{className:"form-group",onSubmit:this.handleSubmitEdit},o.a.createElement("div",{class:"form-group"},o.a.createElement("label",null,"ID Kecamatan"),o.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_active_kecamatan},this.state.table_kecamatan.map(function(t,a){return o.a.createElement("option",{value:t.id_kecamatan,selected:t.id_kecamatan==e.state.activeid_kecamatan},t.id_kecamatan," - ",t.nama)}))),o.a.createElement("div",{class:"form-group"},o.a.createElement("label",null,"ID User"),o.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_active_user},o.a.createElement("option",{disabled:!0,selected:!0},"Pilih ID User"),this.state.table_constraint_user.map(function(t,a){return o.a.createElement("option",{value:t.id_user,selected:t.id_user==e.state.activeid_user},t.id_user," - ",t.username)}))),o.a.createElement("input",{type:"submit",className:"form-control btn btn-success",Value:"Submit"}))),o.a.createElement(u.x,null)),o.a.createElement(m.a,{data:this.state.table_constraint_user,defaultPageSize:10,filterable:!0,columns:[{accessor:"id_user",show:!1},{accessor:"id_kecamatan",show:!1},{Header:"ID Role",accessor:"id_role",show:!1,Cell:function(e){return o.a.createElement("div",null,e.row.id_role)}},{Header:"User",accessor:"username",Cell:function(e){return o.a.createElement("div",null,e.row.username)}},{Header:"Kecamatan",accessor:"nama",Cell:function(e){return o.a.createElement("div",null,e.row.nama)}},{Header:"Role",accessor:"role",show:!1},{Header:"Actions",filterable:!1,Cell:function(t){return o.a.createElement("div",null,o.a.createElement(u.d,{outline:!0,color:"success",onClick:function(){return e.toggleLarge(t.row)},className:"mr-1"},o.a.createElement("i",{className:"cui-pencil icons text-left"})),o.a.createElement(u.d,{outline:!0,color:"danger",onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&e.handledelete(t.row)},className:"mr-1"},o.a.createElement("i",{className:"cui-circle-x icons text-left"})))}}]}),o.a.createElement("hr",null)))))):"1"==sessionStorage.getItem("login_session")?o.a.createElement("div",null,alert("Anda tidak memiliki hak akses!"),o.a.createElement(c.d,{to:"/login"})):o.a.createElement(c.d,{to:"/404"}):o.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:100}},o.a.createElement("div",{className:"sweet-loading"},o.a.createElement(d.RingLoader,{color:"#123abc"})))}}]),t}(s.Component);t.default=p}});
//# sourceMappingURL=10.ebd4df08.chunk.js.map