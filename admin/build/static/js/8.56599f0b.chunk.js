webpackJsonp([8],{551:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=a.n(o),c=a(39),u=a(9),m=a(72),h=a(33),d=(a.n(h),a(177)),p=(a.n(d),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),g=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e){a.setState(n({},e.target.name,e.target.value))},a.handleChangeOption=function(e){a.setState({value:e.target.value})},a.handleChangeOptionActiveValue=function(e){a.setState({activevalueNum:e.target.value})},a.handleSubmitCreate=function(e){e.preventDefault(),console.log(a.state.table_user),fetch("http://149.28.138.217/api/create_user?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:a.state.password,role:a.state.value})}).then(a.fetchall).then(a.setState({primary:!a.state.primary})).catch(function(e){a.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})},a.handleSubmitEdit=function(e){e.preventDefault(),console.log(a.state.activevalueNum),fetch("http://149.28.138.217/api/update_user/"+a.state.activeid+"?token="+sessionStorage.getItem("token"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:a.state.activeusername,password:a.state.activepassword,role:a.state.activevalueNum})}).then(a.fetchall).then(a.setState({large:!a.state.large})).catch(function(e){a.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})},a.state={isLoaded:!1,primary:!1,large:!1,modal:!1,items:[],table_user:[],table_tpu:[],table_role_tpu:[],nama:"",username:"",password:"",value:"",activeid:"",activeusername:"",activepassword:"",activevalue:"",activevalueNum:"",activetpu:""},a.toggle=a.toggle.bind(a),a.toggleLarge=a.toggleLarge.bind(a),a.togglePrimary=a.togglePrimary.bind(a),a.fetchall=a.fetchall.bind(a),a.fetch_role_tpu=a.fetch_role_tpu.bind(a),a.fetch_user=a.fetch_user.bind(a),a.fetch_tpu=a.fetch_tpu.bind(a),a.fetchall(),a}return s(t,e),p(t,[{key:"fetchall",value:function(){this.fetch_user(),this.fetch_tpu(),this.fetch_role_tpu()}},{key:"fetch_user",value:function(){var e=this;fetch("http://149.28.138.217/api/user/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_user:t,isLoaded:!0});for(var a=0;a<t.length;a++)"0"==t[a].role?e.state.table_user[a].role_details="Admin Pusat":"1"==t[a].role?e.state.table_user[a].role_details="Admin TPU":"2"==t[a].role?e.state.table_user[a].role_details="Kepala UPT Pemakaman":"3"==t[a].role?e.state.table_user[a].role_details="Kepala Dinas":"4"==t[a].role?e.state.table_user[a].role_details="Kepala Kecamatan":e.state.table_user[a].role_details="Admin Kecamatan"})}},{key:"fetch_tpu",value:function(){var e=this;fetch("http://149.28.138.217/api/tpu/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_tpu:t})})}},{key:"fetch_role_tpu",value:function(){var e=this;fetch("http://149.28.138.217/api/role_tpu/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_role_tpu:t})})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"toggleLarge",value:function(e){this.setState({large:!this.state.large}),this.state.activeid=e.id_user,this.state.activeusername=e.username,this.state.activepassword=e.password,this.state.activevalueNum=e.role,0==e.role?this.state.activevalue="Admin Pusat":1==e.role?this.state.activevalue="Admin TPU":2==e.role?this.state.activevalue="Admin Kelurahan":3==e.role?this.state.activevalue="Kepala UPT Pemakaman":4==e.role?this.state.activevalue="Kepala Dinas Perkim":5==e.role?this.state.activevalue="Camat":this.state.activevalue="Pengguna"}},{key:"togglePrimary",value:function(){this.setState({primary:!this.state.primary})}},{key:"componentDidMount",value:function(){}},{key:"handledelete",value:function(e){var t=this;fetch("http://149.28.138.217/api/delete_user/"+e.id_user+"?token="+sessionStorage.getItem("token")+"&role="+sessionStorage.getItem("login_session"),{method:"DELETE"}).then(this.fetchall).catch(function(e){t.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?0==sessionStorage.getItem("login_session")?i.a.createElement("div",{className:"animated fadeIn"},i.a.createElement(u.v,{isOpen:this.state.primary,toggle:this.togglePrimary,className:"modal-primary "+this.props.className},i.a.createElement(u.y,{toggle:this.togglePrimary},"Create New User"),i.a.createElement(u.w,null,i.a.createElement("form",{onSubmit:this.handleSubmitCreate},i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Username"),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",onChange:this.handleChange})),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Password"),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange})),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Role"),i.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption},i.a.createElement("option",null,"Pilih Role"),i.a.createElement("option",{value:"0"},"Admin Pusat"),i.a.createElement("option",{value:"1"},"Admin TPU"),i.a.createElement("option",{value:"2"},"Kepala UPT"),i.a.createElement("option",{value:"3"},"Kepala Dinas"),i.a.createElement("option",{value:"4"},"Kepala Kecamatan"),i.a.createElement("option",{value:"5"},"Admin Kecamatan"),i.a.createElement("option",{value:"6"},"Pengguna"))),i.a.createElement("div",{class:"form-group"},i.a.createElement("input",{type:"submit",className:"form-control btn btn-primary",Value:"Submit"})))),i.a.createElement(u.x,null)),i.a.createElement(u.v,{isOpen:this.state.large,toggle:this.toggleLarge,className:"modal-Large "+this.props.className},i.a.createElement(u.y,{toggle:this.toggleLarge},"Edit User"),i.a.createElement(u.w,null,i.a.createElement("form",{className:"form-group",onSubmit:this.handleSubmitEdit},i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"ID User"),i.a.createElement("input",{type:"text",className:"form-control",name:"activeid",onChange:this.handleChange,value:this.state.activeid,disabled:!0})),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Username"),i.a.createElement("input",{type:"text",className:"form-control",name:"activeusername",onChange:this.handleChange,value:this.state.activeusername})),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{hidden:!0},"Password"),i.a.createElement("input",{type:"text",className:"form-control",name:"activepassword",onChange:this.handleChange,value:this.state.activepassword,hidden:!0})),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Role"),i.a.createElement("select",{class:"form-control",onChange:this.handleChangeOptionActiveValue},i.a.createElement("option",{value:"0",selected:0==this.state.activevalueNum},"Admin Pusat"),i.a.createElement("option",{value:"1",selected:1==this.state.activevalueNum},"Admin TPU"),i.a.createElement("option",{value:"2",selected:2==this.state.activevalueNum},"Kepala UPT"),i.a.createElement("option",{value:"3",selected:3==this.state.activevalueNum},"Kepala Dinas"),i.a.createElement("option",{value:"4",selected:4==this.state.activevalueNum},"Kepala Kecamatan"),i.a.createElement("option",{value:"5",selected:5==this.state.activevalueNum},"Admin Kecamatan"),i.a.createElement("option",{value:"6",selected:6==this.state.activevalueNum},"Pengguna"))),i.a.createElement("input",{type:"submit",className:"form-control btn btn-success",Value:"Submit"}))),i.a.createElement(u.x,null)),i.a.createElement(u.D,null,i.a.createElement(u.h,{xl:12},i.a.createElement(u.e,null,i.a.createElement(u.g,null,i.a.createElement("row",null,i.a.createElement(u.h,{col:"2"},i.a.createElement("strong",null,"Users")),i.a.createElement(u.h,{col:"2",className:"text-right"},i.a.createElement(u.d,{outline:!0,color:"primary",onClick:this.togglePrimary,className:"mr-1"},"Create")))),i.a.createElement(u.f,null,i.a.createElement(m.a,{data:this.state.table_user,defaultPageSize:10,filterable:!0,columns:[{accessor:"id_user",show:!1},{accessor:"password",show:!1},{Header:"Username",accessor:"username"},{Header:"Detail Role",accessor:"role_details"},{Header:"Actions",filterable:!1,Cell:function(t){return i.a.createElement("div",null,i.a.createElement(u.d,{outline:!0,color:"success",onClick:function(){return e.toggleLarge(t.row)},className:"mr-1"},i.a.createElement("i",{className:"cui-pencil icons text-left"})),i.a.createElement(u.d,{outline:!0,color:"danger",onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&e.handledelete(t.row)},className:"mr-1"},i.a.createElement("i",{className:"cui-circle-x icons text-left"})))}}]}),i.a.createElement("hr",null)))))):"1"==sessionStorage.getItem("login_session")?i.a.createElement("div",null,alert("Anda tidak memiliki hak akses!"),i.a.createElement(c.d,{to:"/login"})):i.a.createElement(c.d,{to:"/404"}):i.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:100}},i.a.createElement("div",{className:"sweet-loading"},i.a.createElement(h.RingLoader,{color:"#123abc"})))}}]),t}(o.Component);t.default=g}});
//# sourceMappingURL=8.56599f0b.chunk.js.map