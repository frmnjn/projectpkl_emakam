webpackJsonp([9],{516:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),s=a.n(o),u=a(37),c=a(9),m=a(166),p=a(46),d=(a.n(p),a(167)),h=(a.n(d),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),g=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e){a.setState(n({},e.target.name,e.target.value))},a.handleSubmitCreate=function(e){e.preventDefault(),console.log(a.state.value_user),fetch("http://api.emakam.tujuhlangit.id/api/create_role_tpu?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_tpu:a.state.value_tpu,id_user:a.state.value_user})}).then(a.fetchall).then(alert("update sukses"),a.setState({primary:!a.state.primary}))},a.handleSubmitEdit=function(e){a.state.tpu_validation&&fetch("http://api.emakam.tujuhlangit.id/api/update_role_tpu/"+a.state.active_id_role_tpu+"?token="+sessionStorage.getItem("token"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_tpu:a.state.activevalue_tpu,id_user:a.state.activevalue_user})}).then(a.fetchall).then(a.setState({large:!a.state.large}),alert("update sukses"))},a.handleChangeOption_tpu=function(e){a.setState({value_tpu:e.target.value})},a.handleChangeOption_user=function(e){a.setState({value_user:e.target.value})},a.handleChangeOption_active_tpu=function(e){a.setState({activevalue_tpu:e.target.value})},a.handleChangeOption_active_user=function(e){a.setState({activevalue_user:e.target.value})},a.state={primary:!1,large:!1,modal:!1,isLoaded:!1,table_user:[],table_tpu:[],table_role_tpu:[],table_constraint_user:[],table_validation:[],tpu_validation:!0,id_tpu:"",id_user:"",value_tpu:"",value_user:"",activevalue_tpu:"",activevalue_user:"",activeid_tpu:"",activeid_user:"",activenama_tpu:"",activeusername:"",active_id_role_tpu:""},a.toggle=a.toggle.bind(a),a.toggleLarge=a.toggleLarge.bind(a),a.togglePrimary=a.togglePrimary.bind(a),a.fetchall=a.fetchall.bind(a),a}return i(t,e),h(t,[{key:"componentDidMount",value:function(){this.fetchall()}},{key:"fetchall",value:function(){var e=this;fetch("http://api.emakam.tujuhlangit.id/api/user/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){t=t.filter(function(e){return-1!==e.role.toString().search("1")||-1!==e.role.toString().search("2")}),e.setState({table_user:t})}),fetch("http://api.emakam.tujuhlangit.id/api/tpu/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_tpu:t})}),fetch("http://api.emakam.tujuhlangit.id/api/role_tpu/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({table_role_tpu:t})}),fetch("http://api.emakam.tujuhlangit.id/api/constraint_user?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){t=t.filter(function(e){return-1!==e.role.toString().search("1")||-1!==e.role.toString().search("2")}),e.setState({table_constraint_user:t,isLoaded:!0})})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"toggleLarge",value:function(e){this.state.activevalue_tpu=e.id_tpu,this.state.activevalue_user=e.id_user,this.state.activeid_tpu=e.id_tpu,this.state.activenama_tpu=e.nama_tpu,this.state.activeid_user=e.id_user,this.state.activeusername=e.username,this.state.active_id_role_tpu=e.id_role_tpu,this.setState({large:!this.state.large})}},{key:"togglePrimary",value:function(){this.setState({primary:!this.state.primary})}},{key:"handledelete",value:function(e){console.log(e),fetch("http://api.emakam.tujuhlangit.id/api/delete_role_tpu/"+e.id_role_tpu+"?token="+sessionStorage.getItem("token"),{method:"DELETE"}).then(this.fetchall).then(function(){alert("Hak Akses Berhasil dihapus!")})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?0==sessionStorage.getItem("login_session")?s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(c.D,null,s.a.createElement(c.h,{xl:12},s.a.createElement(c.e,null,s.a.createElement(c.g,null,s.a.createElement("row",null,s.a.createElement(c.h,{col:"2"},s.a.createElement("strong",null,"Users Role")),s.a.createElement(c.h,{col:"2",className:"text-right"},s.a.createElement(c.d,{outline:!0,color:"primary",onClick:this.togglePrimary,className:"mr-1"},"Create")))),s.a.createElement(c.f,null,s.a.createElement(c.v,{isOpen:this.state.primary,toggle:this.togglePrimary,className:"modal-primary "+this.props.className},s.a.createElement(c.y,{toggle:this.togglePrimary},"Buat Hak Akses"),s.a.createElement(c.w,null,s.a.createElement("form",{onSubmit:this.handleSubmitCreate},s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"ID TPU"),s.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_tpu},s.a.createElement("option",{disabled:!0,selected:!0},"ID TPU"),this.state.table_tpu.map(function(e,t){return s.a.createElement("option",{value:e.id_tpu},e.id_tpu," - ",e.nama_tpu)}))),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"ID User"),s.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_user},s.a.createElement("option",{disabled:!0,selected:!0},"ID User"),this.state.table_user.map(function(e,t){return s.a.createElement("option",{value:e.id_user},e.id_user," - ",e.username)}))),s.a.createElement("div",{class:"form-group"},s.a.createElement("input",{type:"submit",className:"form-control btn btn-primary",Value:"Submit"})))),s.a.createElement(c.x,null)),s.a.createElement(c.v,{isOpen:this.state.large,toggle:this.toggleLarge,className:"modal-Large "+this.props.className},s.a.createElement(c.y,{toggle:this.toggleLarge},"Edit User"),s.a.createElement(c.w,null,s.a.createElement("form",{className:"form-group",onSubmit:this.handleSubmitEdit},s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"ID TPU"),s.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_active_tpu},this.state.table_tpu.map(function(t,a){return s.a.createElement("option",{value:t.id_tpu,selected:t.id_tpu==e.state.activeid_tpu},t.id_tpu," - ",t.nama_tpu)}))),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"ID User"),s.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption_active_user},s.a.createElement("option",{disabled:!0,selected:!0},"Pilih ID User"),this.state.table_user.map(function(t,a){return s.a.createElement("option",{value:t.id_user,selected:t.id_user==e.state.activeid_user},t.id_user," - ",t.username)}))),s.a.createElement("input",{type:"submit",className:"form-control btn btn-success",Value:"Submit"}))),s.a.createElement(c.x,null)),s.a.createElement(m.a,{data:this.state.table_constraint_user,defaultPageSize:10,filterable:!0,columns:[{accessor:"id_user",show:!1},{accessor:"id_tpu",show:!1},{Header:"ID Role TPU",accessor:"id_role_tpu",show:!1,Cell:function(e){return s.a.createElement("div",null,e.row.id_role_tpu)}},{Header:"User",accessor:"username",Cell:function(e){return s.a.createElement("div",null,e.row.username)}},{Header:"TPU",accessor:"nama_tpu",Cell:function(e){return s.a.createElement("div",null,e.row.nama_tpu)}},{Header:"Role TPU",accessor:"role",show:!1},{Header:"Actions",filterable:!1,Cell:function(t){return s.a.createElement("div",null,s.a.createElement(c.d,{outline:!0,color:"success",onClick:function(){return e.toggleLarge(t.row)},className:"mr-1"},s.a.createElement("i",{className:"cui-pencil icons text-left"})),s.a.createElement(c.d,{outline:!0,color:"danger",onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&e.handledelete(t.row)},className:"mr-1"},s.a.createElement("i",{className:"cui-circle-x icons text-left"})))}}]}),s.a.createElement("hr",null)))))):"1"==sessionStorage.getItem("login_session")?s.a.createElement("div",null,alert("Anda tidak memiliki hak akses!"),s.a.createElement(u.d,{to:"/login"})):s.a.createElement(u.d,{to:"/404"}):s.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:100}},s.a.createElement("div",{className:"sweet-loading"},s.a.createElement(p.RingLoader,{color:"#123abc"})))}}]),t}(o.Component);t.default=g}});
//# sourceMappingURL=9.e8ebf3a5.chunk.js.map