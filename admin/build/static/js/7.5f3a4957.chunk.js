webpackJsonp([7],{557:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),c=a.n(s),r=a(39),m=(a(179),a(180)),u=(a.n(m),a(178),a(9)),h=a(181),d=(a.n(h),a(182)),g=(a.n(d),a(103)),p=a(33),E=(a.n(p),a(104)),k=(a.n(E),a(177)),f=(a.n(k),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),y=(Object(d.getStyle)("--primary"),Object(d.getStyle)("--success"),Object(d.getStyle)("--info"),Object(d.getStyle)("--warning"),Object(d.getStyle)("--danger"),function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleKode=function(e){a.setState({kodeaktif:e.target.value})},a.handleNama=function(e){a.setState({namaaktif:e.target.value})},a.handleKecamatan=function(e){a.setState({kecamatanaktif:e.target.value})},a.toggle=a.toggle.bind(a),a.toggleSmall=a.toggleSmall.bind(a),a.toggleEdit=a.toggleEdit.bind(a),a.toggleEditclose=a.toggleEditclose.bind(a),a.toggleCreate=a.toggleCreate.bind(a),a.handleEdit=a.handleEdit.bind(a),a.fetchdata=a.fetchdata.bind(a),a.handleDelete=a.handleDelete.bind(a),a.handleCreate=a.handleCreate.bind(a),a.mapClicked=a.mapClicked.bind(a),a.toggleLocation=a.toggleLocation.bind(a),a.toggleLocationClose=a.toggleLocationClose.bind(a),a.onRadioBtnClick=a.onRadioBtnClick.bind(a),a.state={dropdownOpen:!1,radioSelected:2,error:null,isLoaded:!1,items:[],kecamatan:[],blok:[],activename:null,activeqty:null,activesupplier:null,idtpuaktif:null,namaaktif:null,kecamatanaktif:null,kodeaktif:null,lat:null,lng:null,formqty:"1"},a}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.fetchdata()}},{key:"fetchdata",value:function(){var e=this;fetch("http://localhost:8000/api/tpu/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,items:t})}).then(fetch("http://localhost:8000/api/kecamatan/viewall?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,kecamatan:t})}))}},{key:"handleEdit",value:function(){var e=this;alert("new lat+lng is : "+this.state.lat+","+this.state.lng),fetch("http://localhost:8000/api/tpu/edit/"+this.state.idtpuaktif+"?token="+sessionStorage.getItem("token"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({nama_tpu:this.state.namaaktif,id_kecamatan:this.state.kecamatanaktif,kode_tpu:this.state.kodeaktif,lat:this.state.lat,lng:this.state.lng})}).then(function(e){return e.json()}).then(function(e){alert(e)}).then(this.fetchdata).then(this.setState({edit:!this.state.edit})).catch(function(t){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"handleCreate",value:function(){var e=this;fetch("http://localhost:8000/api/tpu/create?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({nama_tpu:this.state.namaaktif,id_kecamatan:this.state.kecamatanaktif,kode_tpu:this.state.kodeaktif,lat:this.state.lat,lng:this.state.lng})}).then(function(e){return e.json()}).then(function(e){alert(e)}).then(this.fetchdata).then(this.setState({create:!this.state.create})).catch(function(t){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"handleDelete",value:function(){var e=this;fetch("http://localhost:8000/api/tpu/delete/"+this.state.idtpuaktif+"?token="+sessionStorage.getItem("token"),{method:"DELETE"}).then(this.fetchdata).then(this.setState({small:!this.state.small})).catch(function(t){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"mapClicked",value:function(e,t,a){this.setState({lat:a.latLng.lat(),lng:a.latLng.lng()})}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"onRadioBtnClick",value:function(e){this.setState({radioSelected:e})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"toggleSmall",value:function(e){this.setState({small:!this.state.small,idtpuaktif:e.id_tpu})}},{key:"toggleEdit",value:function(e){this.setState({edit:!this.state.edit,idtpuaktif:e.id_tpu,namaaktif:e.nama_tpu,kecamatanaktif:e.id_kecamatan,kodeaktif:e.kode_tpu})}},{key:"toggleEditclose",value:function(e){this.setState({edit:!this.state.edit})}},{key:"toggleCreate",value:function(){this.setState({create:!this.state.create})}},{key:"toggleLocation",value:function(e){this.setState({lat:parseFloat(e.lat),lng:parseFloat(e.lng),location:!this.state.location})}},{key:"toggleLocationClose",value:function(){this.setState({location:!this.state.location})}},{key:"render",value:function(){var e=this;if(this.state.isLoaded){if(0==sessionStorage.getItem("login_session")){var t,a,l;return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(u.v,{isOpen:this.state.location,toggle:this.toggleLocationClose,className:"modal-large "+this.props.className},c.a.createElement(u.y,{toggle:this.toggleLocationClose},"Lokasi TPU"),c.a.createElement(u.w,null,c.a.createElement("div",null,c.a.createElement(u.D,null,c.a.createElement(u.h,{style:{height:"50vh"}},c.a.createElement(E.Map,(t={google:this.props.google,zoom:14,initialCenter:{lat:this.state.lat,lng:this.state.lng}},n(t,"zoom",13),n(t,"style",{width:"95%"}),t),c.a.createElement(E.Marker,{position:{lat:this.state.lat,lng:this.state.lng},onClick:this.onMarkerClick,name:"Current location"}),c.a.createElement(E.InfoWindow,{onClose:this.onInfoWindowClose},c.a.createElement("div",null,c.a.createElement("h1",null,"Lalala")))))))),c.a.createElement(u.x,null,c.a.createElement(u.d,{color:"secondary",onClick:this.toggleLocation},"Tutup"))),c.a.createElement(u.v,{isOpen:this.state.edit,toggle:this.toggleEditclose,className:"modal-sm "+this.props.className},c.a.createElement(u.y,{toggle:this.toggleEditclose},"edit"),c.a.createElement(u.w,null,c.a.createElement(u.D,null,c.a.createElement(u.h,{xs:"12"},c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,"Ubah Data TPU")))),c.a.createElement("br",null),c.a.createElement(u.D,null,c.a.createElement(u.h,{xs:"12"},c.a.createElement(u.o,{onChange:this.handleNama,type:"text",id:"input1-group3",name:"input1-group3",value:this.state.namaaktif}),c.a.createElement("br",null),c.a.createElement(u.o,{onChange:this.handleKode,type:"text",id:"input1-group3",name:"input1-group3",value:this.state.kodeaktif}),c.a.createElement("br",null),c.a.createElement(u.o,{onChange:this.handleKecamatan,type:"select",name:"",id:"blok"},c.a.createElement("option",null,"Pilih Kecamatan"),this.state.kecamatan.map(function(t){return c.a.createElement("option",{value:t.id_kecamatan,selected:t.id_kecamatan==e.state.kecamatanaktif},t.nama)})),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement(u.D,null,c.a.createElement(u.h,{style:{height:"50vh",width:"5vw"}},c.a.createElement(E.Map,(a={onClick:this.mapClicked,google:this.props.google,zoom:14,initialCenter:{lat:-7.967345,lng:112.632462}},n(a,"zoom",13),n(a,"style",{width:"90%"}),a),c.a.createElement(E.Marker,{position:{lat:this.state.lat,lng:this.state.lng},onClick:this.onMarkerClick,name:"Current location"}),c.a.createElement(E.InfoWindow,{onClose:this.onInfoWindowClose},c.a.createElement("div",null,c.a.createElement("h1",null,"Lalala")))))),c.a.createElement("hr",null)))),c.a.createElement(u.x,null,c.a.createElement(u.d,{color:"success",onClick:this.handleEdit},"edit")," ",c.a.createElement(u.d,{color:"secondary",onClick:this.toggleEditclose},"Cancel"))),c.a.createElement(u.v,{isOpen:this.state.create,toggle:this.toggleCreate,className:"modal-sm "+this.props.className},c.a.createElement(u.y,{toggle:this.toggleCreate},"Buat Baru"),c.a.createElement(u.w,null,c.a.createElement(u.D,null,c.a.createElement(u.h,{xs:"12"},c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,"Masukan Data")))),c.a.createElement("br",null),c.a.createElement(u.D,null,c.a.createElement(u.h,{xs:"12"},c.a.createElement(u.o,{onChange:this.handleNama,type:"text",id:"input1-group3",name:"input1-group3",placeholder:"Nama TPU"})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(u.h,{xs:"12"},c.a.createElement(u.o,{onChange:this.handleKode,type:"text",id:"input1-group3",name:"input1-group3",placeholder:"Kode TPU"})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(u.h,{xs:"12"},c.a.createElement(u.o,{onChange:this.handleKecamatan,type:"select",name:"",id:"blok"},c.a.createElement("option",null,"Pilih Kecamatan"),this.state.kecamatan.map(function(e){return c.a.createElement("option",{value:e.id_kecamatan},e.nama)})),c.a.createElement("br",null))),c.a.createElement("hr",null),c.a.createElement(u.D,null,c.a.createElement(u.h,{style:{height:"50vh",width:"5vw"}},c.a.createElement(E.Map,(l={onClick:this.mapClicked,google:this.props.google,zoom:14,initialCenter:{lat:this.state.lat,lng:this.state.lng}},n(l,"zoom",18),n(l,"style",{width:"90%"}),l),c.a.createElement(E.Marker,{position:{lat:this.state.lat,lng:this.state.lng},onClick:this.onMarkerClick,name:"Current location"}),c.a.createElement(E.InfoWindow,{onClose:this.onInfoWindowClose},c.a.createElement("div",null,c.a.createElement("h1",null,"Lalala")))))),c.a.createElement("hr",null)),c.a.createElement(u.x,null,c.a.createElement(u.d,{color:"primary",onClick:this.handleCreate},"Buat"),c.a.createElement(u.d,{color:"secondary",onClick:this.toggleCreate},"Batal"))),c.a.createElement(u.v,{isOpen:this.state.small,toggle:this.toggleSmall,className:"modal-sm "+this.props.className},c.a.createElement(u.y,{toggle:this.toggleSmall}),c.a.createElement(u.w,null,c.a.createElement("strong",null,"Menghapus makam akan menghapus seluruh data penghuni makam"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("strong",null,"Apakah anda yakin ingin menghapus makam ",this.state.idtpuaktif," ?")),c.a.createElement(u.x,null,c.a.createElement(u.d,{color:"danger",onClick:function(){return e.handleDelete()}},"hapus")," ",c.a.createElement(u.d,{color:"secondary",onClick:this.toggleSmall},"batal"))),c.a.createElement(u.D,null,c.a.createElement(u.h,null,c.a.createElement(u.e,null,c.a.createElement(u.g,null,c.a.createElement(u.D,null,c.a.createElement(u.h,{col:"10"},c.a.createElement("strong",null,"Manajemen TPU")),c.a.createElement(u.h,{col:"2",className:"text-right"},c.a.createElement(u.d,{onClick:this.toggleCreate,outline:!0,color:"primary"},"Create")))),c.a.createElement(u.f,null,c.a.createElement(g.a,{data:this.state.items,defaultPageSize:10,filterable:!0,columns:[{accessor:"id_tpu",show:!1},{accessor:"kode_tpu",show:!1},{accessor:"id_kecamatan",show:!1},{accessor:"lat",show:!1},{accessor:"lng",show:!1},{Header:"Nama TPU",accessor:"nama_tpu"},{Header:"Kecamatan",accessor:"nama"},{Header:"Actions",accessor:"id_blok",filterable:!1,Cell:function(t){return c.a.createElement("div",null,c.a.createElement(u.D,null,c.a.createElement(u.h,{col:"2",xl:!0,className:"mb-1 mb-xl-0"},c.a.createElement(u.d,{onClick:function(){return e.toggleLocation(t.row)},block:!0,outline:!0,color:"primary"},c.a.createElement("i",{className:"cui-location-pin icons text-left"}))),c.a.createElement(u.h,{col:"2",xl:!0,className:"mb-1 mb-xl-0"},c.a.createElement(u.d,{onClick:function(){return e.toggleEdit(t.row)},block:!0,outline:!0,color:"success"},c.a.createElement("i",{className:"cui-pencil icons text-left"}))),c.a.createElement(u.h,{col:"2",xl:!0,className:"mb-1 mb-xl-0"},c.a.createElement(u.d,{onClick:function(){return e.toggleSmall(t.row)},block:!0,outline:!0,color:"danger"},c.a.createElement("i",{className:"cui-circle-x icons text-left"})))))}}]}),c.a.createElement("hr",null))))))}return"0"==sessionStorage.getItem("login_session")?c.a.createElement("div",null,alert("Anda tidak memiliki hak akses!"),c.a.createElement(r.d,{to:"/login"})):c.a.createElement(r.d,{to:"/404"})}return c.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:100}},c.a.createElement("div",{className:"sweet-loading"},c.a.createElement(p.RingLoader,{color:"#123abc"})))}}]),t}(s.Component));t.default=Object(E.GoogleApiWrapper)({apiKey:"AIzaSyDTUAyUGbuCXiRX6ywsz4ZIAf_jDPPRwUM"})(y)}});
//# sourceMappingURL=7.5f3a4957.chunk.js.map