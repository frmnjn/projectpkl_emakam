webpackJsonp([11],{543:function(a,e,t){"use strict";function n(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function r(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?a:e}function s(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=t(0),l=t.n(i),u=t(9),m=t(168),c=t(37),_=(t.n(c),t(169)),h=(t.n(_),function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}()),g=function(a){function e(a){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a));return t.handleChange=function(a){t.setState(n({},a.target.name,a.target.value))},t.surat_permohonan=function(a){if(null!=a.no_surat_permohonan){var e="http://api.emakam.tujuhlangit.id/api/dokumen/cetak_dokumen_permohonan?token="+sessionStorage.getItem("token")+"&tanggal_sekarang="+a.tanggal_surat_permohonan+"&nama_ahli_waris="+a.nama_pewaris+"&alamat_ahli_waris="+a.alamat_ahli_waris+"&tanggal_wafat="+a.tanggal_wafat+"&nama_almarhum="+a.nama_almarhum+"&ttl_almarhum="+a.tanggal_lahir_alm+"&ttl_ahli_waris="+a.tgllhr_ahli_waris+"&jenis_kelamin_almarhum="+a.jenis_kelamin+"&tpu_almarhum="+a.nama_tpu+"&alamat_almarhum="+a.alamat_terakhir+"&tanggal_pemakaman="+a.tanggal_pemakaman+"&blok_almarhum="+a.kode_blok+"&no_surat_permohonan="+a.no_surat_permohonan;window.location=e,t.modalnosuratclose}else alert("nomor surat permohonan masih kosong!")},t.cetak_dokumen=function(a){if(null!=a.no_surat_perizinan){var e="http://api.emakam.tujuhlangit.id/api/dokumen/cetak_dokumen_perizinan?token="+sessionStorage.getItem("token")+"&tanggal_sekarang="+a.tanggal_surat_perizinin+"&nama_ahli_waris="+a.nama_pewaris+"&alamat_ahli_waris="+a.alamat_ahli_waris+"&nama_almarhum="+a.nama_almarhum+"&ttl_almarhum="+a.tanggal_lahir_alm+"&jenis_kelamin_almarhum="+a.jenis_kelamin+"&tpu_almarhum="+a.nama_tpu+"&tanggal_pemakaman="+a.tanggal_pemakaman+"&blok_almarhum="+a.kode_blok+"&no_surat_perizinan="+a.no_surat_perizinan+"&no_surat_permohonan="+a.no_surat_permohonan+"&tanggal_surat_permohonan="+a.tanggal_surat_permohonan+"&id_kecamatan="+a.id_kecamatan;window.location=e}else alert("nomor surat perizinan masih kosong!")},t.cetak_dokumen=t.cetak_dokumen.bind(t),t.modalnosuratclose=t.modalnosuratclose.bind(t),t.get_tanggal_sekarang=t.get_tanggal_sekarang.bind(t),t.update_no_surat_perizinan=t.update_no_surat_perizinan.bind(t),t.fetchview=t.fetchview.bind(t),t.state={radioSelected:2,isLoaded:!1,items:[],activenamapenghuni:null,activenamapewaris:null,activetanggal:null,activetanggal_sekarang:null,activenik_ahli_waris:null,activekontak_ahli_waris:null,activenosurat:[],no_surat:null},t}return s(e,a),h(e,[{key:"componentDidMount",value:function(){this.fetchview()}},{key:"fetchview",value:function(){var a=this;fetch("http://api.emakam.tujuhlangit.id/api/dokumen/view_siap_cetak?token="+sessionStorage.getItem("token")+"&id_user="+sessionStorage.getItem("id_user")).then(function(a){return a.json()}).then(function(e){console.log(e),a.setState({isLoaded:!0,items:e})})}},{key:"get_tanggal_sekarang",value:function(){var a=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],e=new Date,t=e.getDate(),n=e.getMonth(),r=e.getYear();return t+" "+a[n]+" "+(r<1e3?r+1900:r)}},{key:"update_no_surat_perizinan",value:function(a){var e=this;fetch("http://api.emakam.tujuhlangit.id/api/dokumen/update?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:a,status:"Proses Selesai",no_surat_perizinan:this.state.no_surat,tanggal_surat_perizinin:this.get_tanggal_sekarang()})}).then(function(a){return a.json()}).then(function(a){alert("Nomor Surat telah tersimpan")}).then(this.fetchview).then(this.modalnosuratclose).catch(function(a){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"nosuratmodal",value:function(a){this.setState({activenosurat:a,nosuratmodal:!this.state.nosuratmodal})}},{key:"modalnosuratclose",value:function(){this.setState({nosuratmodal:!this.state.nosuratmodal})}},{key:"render",value:function(){var a=this;return this.state.isLoaded?l.a.createElement("div",{className:"animated fadeIn"},l.a.createElement(u.v,{isOpen:this.state.nosuratmodal,toggle:this.modalnosuratclose,className:"modal-Large "+this.props.className},l.a.createElement(u.y,{toggle:this.modalnosuratclose},"No Surat"),l.a.createElement(u.w,null,l.a.createElement("form",{className:"form-group",onSubmit:""},l.a.createElement("div",{class:"form-group"},l.a.createElement("label",null,"No Surat"),l.a.createElement("input",{type:"text",className:"form-control",onChange:this.handleChange,name:"no_surat"}),l.a.createElement("br",null),l.a.createElement(u.d,{onClick:function(){return a.update_no_surat_perizinan(a.state.activenosurat.id)}},"Simpan"))))),l.a.createElement(u.D,null,l.a.createElement(u.h,null,l.a.createElement(u.e,null,l.a.createElement(u.g,null,"Cetak Dokumen"),l.a.createElement(u.f,null,l.a.createElement(m.a,{data:this.state.items,resolveData:function(a){return a.map(function(a){return a})},filterable:!0,defaultPageSize:10,columns:[{accessor:"id",show:!1},{accessor:"id_kecamatan",show:!1},{accessor:"nama_almarhum",show:!1},{accessor:"no_surat_perizinan",show:!1},{accessor:"tanggal_surat_permohonan",show:!1},{accessor:"tanggal_surat_perizinin",show:!1},{accessor:"no_surat_permohonan",show:!1},{accessor:"nik_ahli_waris",show:!1},{accessor:"alamat_ahli_waris",show:!1},{accessor:"tanggal_wafat",show:!1},{accessor:"tanggal_lahir_alm",show:!1},{accessor:"tanggal_pemakaman",show:!1},{accessor:"tgllhr_ahli_waris",show:!1},{accessor:"jenis_kelamin",show:!1},{accessor:"nama_tpu",show:!1},{accessor:"alamat_terakhir",show:!1},{accessor:"kode_blok",show:!1},{Header:"Kode Registrasi",accessor:"kode_registrasi"},{Header:"Nomor Surat Izin",accessor:"no_surat_perizinan"},{Header:"Nomor Surat Permohonan",accessor:"no_surat_permohonan"},{Header:"Nama Almarhum",accessor:"nama_almarhum"},{Header:"Nama Pewaris",accessor:"nama_pewaris"},{Header:"Tanggal Wafat",accessor:"tanggal_wafat"},{Header:"Kelengkapan Dokumen",accessor:"kelengkapan_dokumen",show:!1},{Header:"Action",filterable:!1,show:5==sessionStorage.getItem("login_session"),Cell:function(e){return l.a.createElement("div",null,l.a.createElement(u.d,{color:"info",onClick:function(){return a.nosuratmodal(e.row)},className:"mr-1"},"Atur"))}},{Header:"Unduh Surat Permohonan",filterable:!1,Cell:function(e){return l.a.createElement("div",null,l.a.createElement(u.d,{color:"info",onClick:function(){return a.surat_permohonan(e.row)},className:"mr-1"},"Unduh Dokumen"))}},{Header:"Unduh Surat Izin",filterable:!1,Cell:function(e){return l.a.createElement("div",null,l.a.createElement(u.d,{color:"info",onClick:function(){return a.cetak_dokumen(e.row)},className:"mr-1"},"Unduh Dokumen"))}}]}),l.a.createElement("hr",null)))))):l.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:100}},l.a.createElement("div",{className:"sweet-loading"},l.a.createElement(c.RingLoader,{color:"#123abc"})))}}]),e}(i.Component);e.default=g}});
//# sourceMappingURL=11.7ea78e76.chunk.js.map