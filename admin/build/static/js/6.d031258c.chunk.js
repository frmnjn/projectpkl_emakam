webpackJsonp([6],{556:function(e,t,a){"use strict";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),r=a.n(s),c=(a(179),a(180)),u=(a.n(c),a(178),a(39)),h=a(9),d=a(103),g=a(33),p=(a.n(g),a(104)),m=(a.n(p),a(177)),k=(a.n(m),function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}()),f=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleKode=function(e){a.setState({kodeaktif:e.target.value})},a.handleChangeOption=function(e){var t=e.target.value.split(",");a.setState({idtpuaktif:t[0],kodetpuaktif:t[1]})},a.toggle=a.toggle.bind(a),a.toggleSmall=a.toggleSmall.bind(a),a.toggleEdit=a.toggleEdit.bind(a),a.toggleEditclose=a.toggleEditclose.bind(a),a.toggleCreate=a.toggleCreate.bind(a),a.toggleLocation=a.toggleLocation.bind(a),a.toggleLocationClose=a.toggleLocationClose.bind(a),a.handleEdit=a.handleEdit.bind(a),a.fetchblok=a.fetchblok.bind(a),a.handleDelete=a.handleDelete.bind(a),a.handleCreate=a.handleCreate.bind(a),a.fetchtpu=a.fetchtpu.bind(a),a.fetchpolygon=a.fetchpolygon.bind(a),a.onRadioBtnClick=a.onRadioBtnClick.bind(a),a.mapClicked=a.mapClicked.bind(a),a.viewpolygon=a.viewpolygon.bind(a),a.state={dropdownOpen:!1,radioSelected:2,error:null,isLoaded:!1,items:[],blok:[],tpu_role:[],tpu:[],polygon:[],newpolygon:[],dummy:[],activename:null,activeqty:null,activesupplier:null,lng:112.61316118043442,lat:-7.952687231547793,idtpuaktif:null,idblokaktif:null,nomoraktif:null,blokaktif:null,kodeaktif:null,kodetpuaktif:null,formqty:"1"},a.fetchblok(),a.fetchtpu(),a.fetchpolygon(),a}return i(t,e),k(t,[{key:"componentDidMount",value:function(){}},{key:"fetchtpu",value:function(){var e=this;fetch("http://localhost:8000/api/tpu/view_byUser?token="+sessionStorage.getItem("token")+"&id_user="+sessionStorage.getItem("id_user")).then(function(e){return e.json()}).then(function(t){e.setState({tpu:t})})}},{key:"fetchblok",value:function(){var e=this;fetch("http://localhost:8000/api/blok/view?token="+sessionStorage.getItem("token")+"&id_user="+sessionStorage.getItem("id_user")).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,blok:t})})}},{key:"fetchpolygon",value:function(){var e=this;fetch("http://localhost:8000/api/polygon/view?token="+sessionStorage.getItem("token")).then(function(e){return e.json()}).then(function(t){e.setState({dummy:t})})}},{key:"viewpolygon",value:function(e){var t=this,a=this.state.dummy;console.log(a),a=a.filter(function(t){return t.id_blok===e});var l=[];return a.map(function(e){l.push({lat:parseFloat(e.lat),lng:parseFloat(e.lng)}),t.setState({lat:e.lat,lng:e.lng})}),console.log(l),l}},{key:"createpolygon",value:function(e){fetch("http://localhost:8000/api/polygon/create?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_blok:this.state.idblokaktif,lat:e.lat,lng:e.lng})})}},{key:"detelepolygon",value:function(){fetch("http://localhost:8000/api/polygon/delete/"+this.state.idblokaktif+"?token="+sessionStorage.getItem("token"),{method:"DELETE"})}},{key:"handleEdit",value:function(){var e=this;this.detelepolygon(),this.state.newpolygon.map(function(t){e.createpolygon(t)}),fetch("http://localhost:8000/api/blok/edit/"+this.state.idblokaktif+"?token="+sessionStorage.getItem("token"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({kode_blok:this.state.kodetpuaktif+"-"+this.state.kodeaktif,id_tpu:this.state.idtpuaktif})}).then(function(e){return e.json()}).then(function(e){alert(e)}).then(this.setState({edit:!this.state.edit})).then(this.fetchblok).then(this.fetchpolygon).catch(function(t){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"handleCreate",value:function(){var e=this;fetch("http://localhost:8000/api/blok/create?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_tpu:this.state.idtpuaktif,kode_blok:this.state.kodetpuaktif+"-"+this.state.kodeaktif})}).then(function(e){return e.json()}).then(function(t){null==t.message?(e.state.newpolygon.map(function(e){fetch("http://localhost:8000/api/polygon/create?token="+sessionStorage.getItem("token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id_blok:t.id_blok,lat:e.lat,lng:e.lng})})}),alert("pembuatan blokmakam sukses")):alert("pembuatan blokmakam gagal")}).then(this.setState({create:!this.state.create})).then(this.fetchblok).then(this.fetchpolygon).catch(function(t){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"handleDelete",value:function(){var e=this;this.detelepolygon(),fetch("http://localhost:8000/api/blok/delete/"+this.state.idblokaktif+"?token="+sessionStorage.getItem("token"),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){alert(e)}).then(this.fetchblok()).then(this.setState({small:!this.state.small})).then(this.fetchblok).catch(function(t){e.setState({isLoaded:!1}),alert("Permintaan tidak dapat diproses")})}},{key:"mapClicked",value:function(e,t,a){this.setState({newpolygon:this.state.newpolygon.concat({lat:a.latLng.lat(),lng:a.latLng.lng()}),lat:a.latLng.lat(),lng:a.latLng.lng()})}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"onRadioBtnClick",value:function(e){this.setState({radioSelected:e})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"toggleSmall",value:function(e){this.setState({small:!this.state.small,idblokaktif:e.id_blok})}},{key:"toggleEdit",value:function(e){var t=e.kode_blok.split("-");this.setState({newpolygon:[],edit:!this.state.edit,kodetpuaktif:e.kode_tpu,idblokaktif:e.id_blok,idtpuaktif:e.id_tpu,kodeaktif:t[1]})}},{key:"toggleEditclose",value:function(){this.setState({edit:!this.state.edit})}},{key:"toggleCreate",value:function(){this.setState({newpolygon:[],create:!this.state.create})}},{key:"toggleLocation",value:function(e){var t=this.viewpolygon(e.id_blok);this.setState({polygon:t,location:!this.state.location})}},{key:"toggleLocationClose",value:function(){this.setState({location:!this.state.location,lat:this.state.lat,lng:this.state.lng})}},{key:"render",value:function(){var e=this;if(this.state.isLoaded){if(1==sessionStorage.getItem("login_session")){var t,a;return r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement(h.D,null,r.a.createElement(h.h,null,r.a.createElement(h.v,{isOpen:this.state.edit,toggle:this.toggleEditclose,className:"modal-sm "+this.props.className},r.a.createElement(h.y,{toggle:this.toggleEditclose},"edit"),r.a.createElement(h.w,null,r.a.createElement(h.D,null,r.a.createElement(h.h,{xs:"12"},r.a.createElement("div",{className:"small text-muted"},r.a.createElement("span",null,"Kode Blok")))),r.a.createElement("br",null),r.a.createElement(h.D,null,r.a.createElement(h.h,{xs:"12"},r.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption},this.state.tpu.map(function(t){return r.a.createElement("option",{value:t.id_tpu+","+t.kode_tpu,selected:t.id_tpu==e.state.idtpuaktif},t.nama_tpu)})),r.a.createElement("br",null),r.a.createElement(h.o,{onChange:this.handleKode,type:"text",id:"input1-group3",name:"input1-group3",value:this.state.kodeaktif}),r.a.createElement("hr",null),r.a.createElement(h.D,null,r.a.createElement(h.h,{style:{height:"50vh",width:"5vw"}},r.a.createElement(p.Map,(t={onClick:this.mapClicked,google:this.props.google,zoom:14,initialCenter:{lat:this.state.lat,lng:this.state.lng}},l(t,"zoom",16),l(t,"style",{width:"90%"}),t),r.a.createElement(p.Polygon,{paths:this.state.newpolygon,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}),r.a.createElement(p.Marker,{position:{lat:this.state.lat,lng:this.state.lng},onClick:this.onMarkerClick,name:"Current location"}),r.a.createElement(p.InfoWindow,{onClose:this.onInfoWindowClose},r.a.createElement("div",null,r.a.createElement("h1",null,"Lalala"))))))))),r.a.createElement(h.x,null,r.a.createElement(h.d,{color:"success",onClick:this.handleEdit},"edit")," ",r.a.createElement(h.d,{color:"secondary",onClick:this.toggleEditclose},"Cancel"))),r.a.createElement(h.v,{isOpen:this.state.create,toggle:this.toggleCreate,className:"modal-sm "+this.props.className},r.a.createElement(h.y,{toggle:this.toggleCreate},"Buat Baru"),r.a.createElement(h.w,null,r.a.createElement(h.D,null,r.a.createElement(h.h,{xs:"12"},r.a.createElement("div",{className:"small text-muted"},r.a.createElement("span",null,"Masukan Data")))),r.a.createElement("br",null),r.a.createElement("select",{class:"form-control",onChange:this.handleChangeOption},r.a.createElement("option",{value:""},"Pilih Tpu"),this.state.tpu.map(function(e){return r.a.createElement("option",{value:e.id_tpu+","+e.kode_tpu},e.nama_tpu)})),r.a.createElement("br",null),r.a.createElement(h.D,null,r.a.createElement(h.h,{xs:"12"},r.a.createElement(h.o,{onChange:this.handleKode,type:"text",id:"input1-group3",name:"input1-group3",placeholder:"Kode Blok"}))),r.a.createElement("hr",null),r.a.createElement(h.D,null,r.a.createElement(h.h,{style:{height:"50vh",width:"5vw"}},r.a.createElement(p.Map,(a={onClick:this.mapClicked,google:this.props.google,zoom:14,initialCenter:{lat:this.state.lat,lng:this.state.lng}},l(a,"zoom",15),l(a,"style",{width:"90%"}),a),r.a.createElement(p.Polygon,{paths:this.state.newpolygon,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}),r.a.createElement(p.Marker,{position:{lat:this.state.lat,lng:this.state.lng},onClick:this.onMarkerClick,name:"Current location"}),r.a.createElement(p.InfoWindow,{onClose:this.onInfoWindowClose},r.a.createElement("div",null,r.a.createElement("h1",null,"Lalala"))))))),r.a.createElement(h.x,null,r.a.createElement(h.d,{color:"primary",onClick:this.handleCreate},"Buat"),r.a.createElement(h.d,{color:"secondary",onClick:this.toggleCreate},"Batal"))),r.a.createElement(h.v,{isOpen:this.state.small,toggle:this.toggleSmall,className:"modal-sm "+this.props.className},r.a.createElement(h.y,{toggle:this.toggleSmall}),r.a.createElement(h.w,null,"-                    ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"Apakah anda yakin ingin menghapus makam ",this.state.idblokaktif," ?")),r.a.createElement(h.x,null,r.a.createElement(h.d,{color:"danger",onClick:function(){return e.handleDelete()}},"hapus")," ",r.a.createElement(h.d,{color:"secondary",onClick:this.toggleSmall},"batal"))),r.a.createElement(h.v,{isOpen:this.state.location,toggle:this.toggleLocationClose,className:"modal-large "+this.props.className},r.a.createElement(h.y,{toggle:this.toggleLocation},"Poligon Blok Makam"),r.a.createElement(h.w,null,r.a.createElement("div",null,r.a.createElement(h.D,null,r.a.createElement(h.h,{style:{height:"50vh"}},r.a.createElement(p.Map,{google:this.props.google,initialCenter:{lat:this.state.lat,lng:this.state.lng},zoom:15,style:{width:"95%"}},r.a.createElement(p.Polygon,{paths:this.state.polygon,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.35}),r.a.createElement(p.InfoWindow,{onClose:this.onInfoWindowClose},r.a.createElement("div",null,r.a.createElement("h1",null,"Lalala")))))))),r.a.createElement(h.x,null,r.a.createElement(h.d,{color:"secondary",onClick:this.toggleLocationClose},"Tutup"))),r.a.createElement(h.e,null,r.a.createElement(h.g,null,r.a.createElement(h.D,null,r.a.createElement(h.h,{col:"10"},r.a.createElement("strong",null,"Manajemen Blok Makam")),r.a.createElement(h.h,{col:"2",className:"text-right"},r.a.createElement(h.d,{onClick:this.toggleCreate,outline:!0,color:"primary"},"Create")))),r.a.createElement(h.f,null,r.a.createElement(d.a,{data:this.state.blok,defaultPageSize:10,filterable:!0,columns:[{accessor:"id_blok",show:!1},{accessor:"id_tpu",show:!1},{accessor:"kode_tpu",show:!1},{Header:"Kode Blok",accessor:"kode_blok"},{Header:"TPU",accessor:"nama_tpu",Cell:function(e){return r.a.createElement("div",null,e.row.nama_tpu)}},{Header:"Actions",accessor:"id_blok",filterable:!1,Cell:function(t){return r.a.createElement("div",null,r.a.createElement(h.D,null,"\u2003",r.a.createElement(h.d,{onClick:function(){return e.toggleLocation(t.row)},outline:!0,color:"primary"},r.a.createElement("i",{className:"cui-location-pin icons text-left"})),"\u2003",r.a.createElement(h.d,{onClick:function(){return e.toggleEdit(t.row)},outline:!0,color:"success"},r.a.createElement("i",{className:"cui-pencil icons text-left"})),"\u2003",r.a.createElement(h.d,{onClick:function(){return e.toggleSmall(t.row)},outline:!0,color:"danger"},r.a.createElement("i",{className:"cui-circle-x icons text-left"}))))}}]}),r.a.createElement("hr",null))))))}return"0"==sessionStorage.getItem("login_session")?r.a.createElement("div",null,alert("Anda tidak memiliki hak akses!"),r.a.createElement(u.d,{to:"/login"})):r.a.createElement(u.d,{to:"/404"})}return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:100}},r.a.createElement("div",{className:"sweet-loading"},r.a.createElement(g.RingLoader,{color:"#123abc"})))}}]),t}(s.Component);t.default=Object(p.GoogleApiWrapper)({apiKey:"AIzaSyDTUAyUGbuCXiRX6ywsz4ZIAf_jDPPRwUM"})(f)}});
//# sourceMappingURL=6.d031258c.chunk.js.map